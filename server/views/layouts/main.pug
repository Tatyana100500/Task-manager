include /mixins/messages.pug
include /mixins/button.pug

doctype html
html(lang="en")
  block head
      meta(name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no")
      block title
      script(src='/assets/main.js')
      link(rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon")
 body.d-flex.flex-column.min-vh-100
    nav.navbar.navbar-expand-lg.navbar-light.bg-light.mb-3
      a.navbar-brand(href=route('root'))= t('appName')
      button.navbar-toggler(data-toggle="collapse" data-target="#navbarToggleExternalContent")
        span.navbar-toggler-icon
      .collapse.navbar-collapse(id="navbarToggleExternalContent")
        ul.navbar-nav.mr-auto
          li.nav-item
            a.nav-link(href=route('users'))= t('layouts.application.users')
        ul.navbar-nav
          if isAuthenticated()
            li.nav-item
              +buttonTo(route('session'), 'delete')(class="btn nav-link" value=t('layouts.application.signOut'))
          else
            li.nav-item
              a.nav-link(href=route('newSession'))= t('layouts.application.signIn')
            li.nav-item
              a.nav-link(href=route('newUser'))= t('layouts.application.signUp')
    .container.wrapper.flex-grow-1

      each messages, type in reply.flash() || []
        each message in messages
          div.alert(class=`alert-${getAlertClass(type)}`)= message

      h1.my-4
  .container
    header(class="mt-3 mb-5")
      nav.navbar.navbar-expand-lg.navbar-dark.bg-dark
        a.navbar-brand(href= urlFor('root'))
          h3= t('views.layouts.main.header')
        button(class="navbar-toggler" data-toggle="collapse" data-target=".navbar-collapse")
          span.navbar-toggler-icon
        .collapse.navbar-collapse(id="navbarSupportedContent")
          ul.navbar-nav.mr-auto
            block nav-links
          if reply.request.isSigned
            div
              .my-2.my-lg-0
                a.navbar-brand(href= urlFor('editUser', { id: reply.request.currentUser.id }))= reply.request.currentUser.fullName()
                a(href= urlFor('deleteSession') data-method='delete' rel="nofollow" class="btn btn-light ml-2")= t('views.layouts.main.logOut')
    - flash = reply.flash() || []
    +alert(flash)
    block main
    footer(class="mt-auto fixed-bottom text-center")
      div(class="inner")
        p= t('views.layouts.main.footer.text')
          a(class="text-light p-2" href="https://github.com/Tatyana100500")= t('views.layouts.main.footer.ghLink')